# Motion mouse

## Суть проекта
Управление мышкой с использованием акселерометра и микроконтроллера STM32. 
В реализации проекта использовались наработки, полученные при выполнении лабораторных работ курса по STM32, который читается в МФТИ.

## Принцип работы

Микроконтроллер по протоколу UART отправляет на компьютер 5 байт данных каждые 0,1 мс. Эти данные состоят из информации об углах тангажа и крена, которые обсчитываются на stm32, а также информация о нажатии на кнопки мыши. Они обрабатываются скриптом *mouse.py*

## Возможности применения наработок проекта

- Контроль мыши ПК
- Контроллер для игр на ПК
- Пульт для телевизора
- etc.

## Проблемы

- У платы MPU6050 нет API для stm32. В связи с этим использование DMP (Digital Motion Processor) невозможно. В связи с этим обсчёт углов имеет погрешности, нет точного обсчёта углов рысканья

- Тряска при нажатии на кнопки. Решается заменой на кнопки с мягким ходом или использованием другой руки для управления нажатиями

- Требуются скрипты для систем Windows и Linux, в составе проекта только для macOS.


## Цель проекта

Целью проекта является написание низкоуровневых библиотек, обслуживающих интересы проета в обучающих целях, а также изготовление прототипа устройства.

## Инструкция по использованию

### Hardware

При разработке использовалась отладочная плата stm32f0 Discovery и модуль MPU6050, а также преобразователь USB-UART. Все пины будут указаны в терминах этих плат.

- Две кнопки должны быть подключены к пинам PA0 и PA1, должны замыкать их на 3V. Кнопки ответственны за левую и правую кнопки мыши соответственно
- PB6, PB7 - подключаются к SCL и SDA платы MPU6050 соответственно. VCC на MPU6050 подключается в PC0, GND подключается к GND микроконтроллера
- PA9, GND микроконтроллера подключаются к RXD и GND преобразователя USB-UART соответственно

## Software

- Для прошивки микроконтроллера необходимо установить пакет программ. Инструкция для UNIX-систем [здесь](../../Toolchain-installation-guide.md). Для функционирования мыши необходимо наличие python и библиотек macmouse и pyserial

- Подключить отладочную плату к ПК по usb, выполнить в директории проекта

        make flash

- Запустить скрипт

        python3 ./mouse.py

- Подключить преобразователь UART-USB к компьютеру

- Enjoy using!

